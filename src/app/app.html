<main class="container">
  <div class="header">
    <h1>üé® Generador de Paletas de Colores con IA</h1>
    <p>Escribe un tema y la inteligencia artificial generar√° una paleta de colores perfecta para ti</p>
  </div>

  <!-- Formulario para generar paletas -->
  <form class="theme-form">
    <div class="input-group">
      <input
        type="text"
        [formControl]="themeControl"
        placeholder="Ej: Bosque tropical al atardecer, ciudad cyberpunk, playa serena..."
        class="theme-input"
        [class.error]="themeControl.invalid && themeControl.touched"
      />
      <button 
        type="button" 
        class="generate-btn"
        [disabled]="loading() || !isFormValid"
        (click)="onSubmit()"
      >
        @if (loading()) {
          <span class="spinner"></span>
          Generando...
        } @else {
          ‚ú® Generar Paleta
        }
      </button>
    </div>
    
    <!-- Mensajes de validaci√≥n -->
    @if (themeControl.invalid && themeControl.touched) {
      <div class="form-error">
        @if (themeControl.errors?.['required']) {
          Por favor ingresa un tema
        }
        @if (themeControl.errors?.['minlength']) {
          El tema debe tener al menos 3 caracteres
        }
        @if (themeControl.errors?.['maxlength']) {
          El tema no puede exceder 100 caracteres
        }
      </div>
    }
  </form>

  <!-- Resultado: Paleta de colores generada -->
  @if (hasColors) {
    <div class="result-section">
      <div class="result-header">
        <h2>Paleta generada para: "{{ currentTheme() }}"</h2>
        @if (isFallback()) {
          <div class="fallback-notice">
            ‚ö†Ô∏è Se usaron colores de respaldo debido a un problema con la IA
          </div>
        }
      </div>

      <!-- Contenedor de la paleta -->
      <div class="palette-container">
        @for (color of colors(); track color; let i = $index) {
          <div 
            class="color-card"
            [style.backgroundColor]="color"
            (click)="copyColor(color)"
            title="Clic para copiar {{ color }}"
          >
            <div class="color-info" [style.color]="getTextColor(color)">
              <span class="color-code">{{ color }}</span>
              <span class="copy-hint">üìã Copiar</span>
            </div>
          </div>
        }
      </div>

      <!-- Informaci√≥n adicional -->
      <div class="palette-actions">
        <p class="usage-tip">
          üí° <strong>Tip:</strong> Haz clic en cualquier color para copiarlo al portapapeles
        </p>
      </div>
    </div>
  }

  <!-- Estado de carga -->
  @if (loading()) {
    <div class="loading-section">
      <div class="loading-animation">
        <div class="color-dot" style="background: #FF6B6B"></div>
        <div class="color-dot" style="background: #4ECDC4"></div>
        <div class="color-dot" style="background: #45B7D1"></div>
        <div class="color-dot" style="background: #96CEB4"></div>
        <div class="color-dot" style="background: #FFEAA7"></div>
      </div>
      <p>La IA est√° pensando en los colores perfectos...</p>
    </div>
  }

  <!-- Notificaciones -->
  @if (notification()) {
    <div class="notification-section">
      <div class="notification-message">
        {{ notification() }}
      </div>
    </div>
  }

  <!-- Manejo de errores -->
  @if (error()) {
    <div class="error-section">
      <div class="error-message">
        ‚ùå {{ error() }}
      </div>
    </div>
  }

  <!-- Estado inicial (sin colores) -->
  @if (!hasColors && !loading() && !error()) {
    <div class="welcome-section">
      <div class="welcome-content">
        <h3>¬øC√≥mo funciona?</h3>
        <ol>
          <li>Escribe un tema que te inspire (ej: "atardecer en la playa")</li>
          <li>Haz clic en "Generar Paleta"</li>
          <li>La IA crear√° 5 colores perfectos para tu tema</li>
          <li>Copia los c√≥digos hexadecimales para usar en tus proyectos</li>
        </ol>
        
        <div class="examples">
          <h4>Ejemplos de temas:</h4>
          <div class="example-tags">
            <span class="tag">Bosque oto√±al</span>
            <span class="tag">Oc√©ano profundo</span>
            <span class="tag">Ne√≥n cyberpunk</span>
            <span class="tag">Caf√© parisino</span>
            <span class="tag">Aurora boreal</span>
          </div>
        </div>
      </div>
    </div>
  }
</main>


